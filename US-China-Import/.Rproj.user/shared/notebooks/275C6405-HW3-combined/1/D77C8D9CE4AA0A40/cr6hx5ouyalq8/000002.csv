"0","# we create a new column ""rects"" which signals 1 if it row corresponds to a ""recession"" period according to NEBR data"
"0",""
"0","lst <- rep(0, nrow(consumption))"
"0","consumption$rects <-lst"
"0",""
"0","consumption<-transform(consumption,rects=ifelse(Quarter %in% cycle$from,1,rects))"
"0","consumption<-transform(consumption,rects=ifelse(Quarter %in% cycle$to,2,rects))"
"0",""
"0","for (i in seq(2, nrow(consumption), by=1)) {"
"0","  if (consumption$rects[i] == 0) {"
"0","    if (consumption$rects[i-1] == 1) {"
"0","       consumption$rects[i] <- 1"
"0","    }"
"0","  }"
"0","}"
"0",""
"0","consumption<-transform(consumption,rects=ifelse(rects==2,1,rects))"
