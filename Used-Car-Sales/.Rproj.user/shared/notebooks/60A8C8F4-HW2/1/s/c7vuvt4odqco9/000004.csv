"0","## Example data"
"0","set.seed(0)"
"0","dat <- sales"
"0",""
"0","## Determine highlighted regions"
"0","v <- rep(0, max(dat$Time))"
"0","v[c(112:119, 193:210, 339:340)] <- 1"
"0",""
"0","## Get the start and end points for highlighted regions"
"0","inds <- diff(c(0, v))"
"0","start <- dat$Time[inds == 1]"
"0","end <- dat$Time[inds == -1]"
"0","if (length(start) > length(end)) end <- c(end, tail(dat$Time, 1))"
"0",""
"0","## highlight region data"
"0","rects <- data.frame(start=start, end=end, group=seq_along(start))"
"0",""
"0","ggplot(data=dat, aes(Time, Sales)) +"
"0","theme_minimal() +"
"0","geom_line(color = ""#00AFBB"", size = .6) +"
"0","geom_rect(data=rects, inherit.aes=FALSE, aes(xmin=start, xmax=end, ymin=min(dat$Sales),"
"0","ymax=max(dat$Sales), group=group), color=""transparent"", fill=""orange"", "
"0","alpha=0.3) +"
"0","labs(title = ""Used Car Sales"", subtitle = ""(Contraction period highlighted in Orange)"") "
